<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>start exams view</title>
    <!-- ajex -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
 <!-- mathjax settings -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$$','$$'], ['\\(','\\)']]}});
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
 
</script>
    
       <!-- sweetify -->
       <!-- <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
      <!-- bootstrap link -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
      <style>
      .quest{
        /* width: auto; */
        /* white-space: normal;
        /* word-wrap: break-word; */
        
        /* overflow-wrap: scroll;  */
        /* display: flex;
        flex-wrap: wrap; */
        /* justify-content: center; */
        
      }
      /* .quest>*{
        flex: 1 1 auto;
        margin: 10px;
        overflow: hidden; */
        /* height: 100%; */
        /* position: fixed; */
       

      /* } */
/* .math-class{
  text-align: left !important;
  display: inline !important;
} */input[type=radio]{
  transform:scale(1.3);
 
}

</style>
      
</head>
<body>
 
<script>
  $(function(){
    // don't cache ajax or content won't be fresh
    $.ajaxSetup ({
        cache: false
    });
    var ajax_load = "<img src='http://automobiles.honda.com/images/current-offers/small-loading.gif' alt='loading...' />";

    // load() functions
    var loadUrl = "http://fiddle.jshell.net/deborah/pkmvD/show/";
    $("#loadbasic").click(function(){
        $("#result").html(ajax_load).load(loadUrl);
    });

// end  
});
</script>
  <!-- quiz timer  -->
  <div class='float-right sticky-top'>
    <div class="row justify-content-left">
      <div class="col-mx-auto">
        <div class="alert alert-success" role="alert"><center>Time left : <span id="countdown"></span></center></div>
      </div>
    </div>
  </div>
 <!--end quiz timer  -->

<!-- 	

<div class="box-body">
  <h2><p style="float: right" id="countdown"></p></h2>
</div>
<script>
 
	
$time_limit = "2016-08-14 00:10:00"
var d = new Date($time_limit);
var hours = d.getHours(); //00 hours
var minutes = d.getMinutes(); //10 minutes
var seconds = 60 * minutes; // 600seconds

if (typeof(Storage) !== "undefined") {
  if (localStorage.seconds) {
    seconds = localStorage.seconds;
  }
}

function secondPassed() {
  var minutes = Math.round((seconds - 30) / 60);
  console.log(minutes);
  var hours = Math.round((minutes) / 60);
  var remainingSeconds = seconds % 60;
  if (remainingSeconds < 10) {
    remainingSeconds = "0" + remainingSeconds;
  }
  if (typeof(Storage) !== "undefined") {
    localStorage.setItem("seconds", seconds);
  }
  document.getElementById('countdown').innerHTML = hours + ":" + minutes + ":" + remainingSeconds;

  if (seconds == 0) {
    clearInterval(myVar);
    document.getElementById('countdown').innerHTML = "Time Out";
    if (typeof(Storage) !== "undefined") {
      localStorage.removeItem("seconds");
    }
  } else {
    seconds--;
    console.log(seconds);
  }

}
var myVar = setInterval(secondPassed, 1000);
</script>	
	
	

  his approach uses localStorage and does not Pause or Reset the timer on page refresh.

<p id="demo"></p>

<script>
var time = 30; // This is the time allowed
var saved_countdown = localStorage.getItem('saved_countdown');

if(saved_countdown == null) {
    // Set the time we're counting down to using the time allowed
    var new_countdown = new Date().getTime() + (time + 2) * 1000;

    time = new_countdown;
    localStorage.setItem('saved_countdown', new_countdown);
} else {
    time = saved_countdown;
}

// Update the count down every 1 second
var x = setInterval(() => {

    // Get today's date and time
    var now = new Date().getTime();

    // Find the distance between now and the allowed time
    var distance = time - now;

    // Time counter
    var counter = Math.floor((distance % (1000 * 60)) / 1000);

    // Output the result in an element with id="demo"
    document.getElementById("demo").innerHTML = counter + " s";
        
    // If the count down is over, write some text 
    if (counter <= 0) {
        clearInterval(x);
        localStorage.removeItem('saved_countdown');

	      document.getElementById('quiz').submit();

	document.getElementById('quiz').submit();


        document.getElementById("demo").innerHTML = "EXPIRED";
    }
}, 1000);
</script>   -->
	
<!-- <script type="text/javascript">
  
window.onload = function begin(){
document.getElementById('timer').innerHTML =
  5 + ":" + 00;
startTimer();
}

function startTimer() {
  var presentTime = document.getElementById('timer').innerHTML;
  var timeArray = presentTime.split(/[:]+/);
  var m = timeArray[0];
  var s = checkSecond((timeArray[1] - 1));
  if(s==59){m=m-1}
  if(m<0){
    document.getElementById('quiz').submit();
  }
  document.getElementById('timer').innerHTML =
    m + ":" + s;
  setTimeout(startTimer, 1000);
}

function checkSecond(sec) {
  if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
  if (sec < 0) {sec = "59"};
  return sec;
}
</script> -->
    
<br>
<div id="fav_list" class="container">
 
<form action="/calculate_marks" onsubmit="return saveAns()" enctype="multipart/form-data" id ='quiz' method="POST">
  {% csrf_token %}
  <input type="hidden" name="csrfmiddlewaretoken" value="C24rUotmdHawVQJL3KrqiWxvti8UffOFYUc8TRbZtLt36AVLdP3jbkzUVe3beRAa">
    <h1>{{course}} Quiz</h1><br>
    <h4>Number of Questions in the Quiz: {{q_count}}</h4>
    <hr>
    <p>pages {{page_obj}}</p>
    <hr>
  {% for q in  page_obj %}
  
<!-- <h6 style="text-align: right;">[marks {{q.marks}}]</h6> -->
{% if q.img_quiz.url %}
<div  class="text-center" ><img src="{{q.img_quiz.url}}" width="100%" height="300px" alt=""> </div><br>
{% endif %}

<div style="border: 2px dotted green;" class="container shadow-lg mb-1 bg-white rounded">
<p class="d-flex" style="overflow-x: auto; white-space: pre-wrap; font-size: 20px;font-family: sans-serif;" >
{{ q.question }}</p>
{% if q.marks %} 
<h6 style="text-align: right;">[marks {{q.marks}}]</h6>
{% endif %}
</div>
{% if q.option1 %}
  <div  class="card-header shadow-lg mb-1 bg-white rounded">
  <input   type="radio" name="{{forloop.counter}}" id="{{q.option1}}"  value="Option1">
 <label for="option1"> {{q.option1}}</label><br>
</div>
{% endif %}

  {% if q.option2 %}
  <div class="card-header shadow-lg mb-1 bg-white rounded">
  <input   type="radio" name="{{forloop.counter}}" id="{{q.option2}}"  value="Option2">
  <label for="option2">{{q.option2}}</label><br>

 
	  
</div>
{% endif %}

{% if q.option3 %}
<div class="card-header shadow-lg mb-1 bg-white rounded">
  <input  type="radio" name="{{forloop.counter}}" id="{{q.option3}}"  value="Option3">
  <label for="option3">{{q.option3}}</label><br> 
</div>
{% endif %}

{% if q.option4 %}
<div class="card-header shadow-lg mb-1 bg-white rounded">
  <input  type="radio" name="{{forloop.counter}}" id="{{q.option4}}"  value="Option4">
  <label  for="option4">{{q.option4}}</label><br>
</div>
{% endif %}
<br><br>
{% empty %}
<h1 class="card text-center text-danger">No Exam Available Yet. CHECK LATER</h1>
  {% endfor %}

  <input  class="btn btn-primary" type="submit" value="Next Subject">
   
	<div class="azibsButtons">
  <button type="button" id="previous"  class="btn btn-primary pull-left">Prev</button>

  <button type="button" id="next"  class="btn btn-primary pull-right">Next</button>

  <button type="button" id="submit" class="hidden btn btn-primary pull-right">Submit</button>
</div>
	  
</form>
</div>
<br>

<script>
	$("#next").click(function () {
  dataVal++;
  $("#previous").removeClass('hidden');
  dataVal == $(".idrow[data-questions]").length-1 ? $(this).addClass('hidden') : $(this).removeClass('hidden');
  ShowTheelement(dataVal);
  if (dataVal == $(".idrow[data-questions]").length-1) {
    $("#submit").removeClass('hidden');
  }
});

$("#previous").click(function () {
  dataVal--;
  $("#next").removeClass('hidden');
  dataVal == 0 ? $(this).addClass('hidden') : $(this).removeClass('hidden');
  ShowTheelement(dataVal);
  if (dataVal == $(".idrow[data-questions]").length-2) {
    $("#submit").addClass('hidden');
  }
});
</script>
<script> 
  function saveAns(){  

      var ele = document.getElementsByTagName('input'); 
      for(i = 0; i < ele.length; i++) { 
          if(ele[i].type="radio") { 
              if(ele[i].checked){        
                setCookie(ele[i].name,ele[i].value,3)
              }
          } 
      } 
        
  }
  
  function setCookie(cname, cvalue, exdays) {
var d = new Date();
d.setTime(d.getTime() + (exdays*24*60*60*1000));
var expires = "expires="+ d.toUTCString();
document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
</script>


<!-- pagination codes star -->

{% if page_obj.has_other_pages %}
<div class="container" id = ''>
<nav class="d-flex" aria-label="Page navigation example">

  <ul class="pagination  pagination-sm flex-wrap justify-content-center">
    {% if page_obj.has_previous %}
      <li class=" page-item"><a  class="continue page-link badge bg-primary rounded-pill" href="?page={{ page_obj.previous_page_number }}">previous &laquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in page_obj.paginator.page_range %}
      {% if page_obj.number == i %}
        <li class="page-item active" aria-current="page"><span><a class="page-link" href="">{{ i }}</a></span></li>
      {% else %}
        <li class="page-item"><a class="continue page-link" href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link badge bg-primary rounded-pill" href="?page={{ page_obj.next_page_number }}"> next &raquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>last &raquo; </span></li>
    {% endif %}
  </ul>
</nav>
</div>
{% endif %}

</div>

<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->


<!-- quiz timer start-->

<script>
 
  $time_limit = "2016-08-14 00:01:00"
  var d = new Date($time_limit);
  var hours = d.getHours(); //00 hours
  var minutes = d.getMinutes(); //10 minutes
  var seconds = 60 * minutes; // 600seconds
  
  if (typeof(Storage) !== "undefined") {
    if (localStorage.seconds) {
      seconds = localStorage.seconds;
    }
  }
  
  function secondPassed() {
    var minutes = Math.round((seconds - 30) / 60);
    console.log(minutes);
    var hours = Math.round((minutes) / 60);
    var remainingSeconds = seconds % 60;
    if (remainingSeconds < 10) {
      remainingSeconds = "0" + remainingSeconds;
    }
    if (typeof(Storage) !== "undefined") {
      localStorage.setItem("seconds", seconds);
    }
    document.getElementById('countdown').innerHTML = hours + ":" + minutes + ":" + remainingSeconds;
  
    if (seconds == 0) {
      clearInterval(myVar);
      document.getElementById('countdown').innerHTML = "Time Out";
      document.getElementById('quiz').submit();
      if (typeof(Storage) !== "undefined") {
        localStorage.removeItem("seconds");
      }
    } else {
      seconds--;
      console.log(seconds);
    }
  
  }
  var myVar = setInterval(secondPassed, 1000);
  </script>	
    <!-- end of quiz timer -->
  <!-- <script>
    function reset(){
      r = localStorage.removeItem("seconds");
      return r 
    }
  </script> -->
</body>
</html>
<!-- 
 <script> 
    function saveAns(){  

        var ele = document.getElementsByTagName('input'); 
        for(i = 0; i < ele.length; i++) { 
            if(ele[i].type="radio") { 
                if(ele[i].checked){        
                  setCookie(ele[i].name,ele[i].value,3)
                }
            } 
        } 
          
    }
    
    function setCookie(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

</script>  -->

<br><br><br><br><br><br>
